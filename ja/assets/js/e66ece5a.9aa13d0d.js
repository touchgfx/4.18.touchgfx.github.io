"use strict";(self.webpackChunktouchgfx_documentation=self.webpackChunktouchgfx_documentation||[]).push([[9410],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return h}});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=r.createContext({}),d=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=d(e.components);return r.createElement(c.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},s=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,c=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),s=d(n),h=a,m=s["".concat(c,".").concat(h)]||s[h]||p[h]||o;return n?r.createElement(m,i(i({ref:t},u),{},{components:n})):r.createElement(m,i({ref:t},u))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=s;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var d=2;d<o;d++)i[d]=n[d];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}s.displayName="MDXCreateElement"},70814:function(e,t,n){var r=n(67294),a=n(88678);const o=r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},r.createElement("path",{"fill-rule":"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}));class i extends r.Component{render(){return r.createElement(a.Z,{color:"var(--highlight-color-caution)",header:"Caution",type:"caution",icon:o},this.props.children)}}t.Z=i},22425:function(e,t,n){var r=n(67294);class a extends r.Component{render(){return r.createElement("div",{class:"code-header"},r.createElement("div",null,r.createElement("h5",null,this.props.children)))}}t.Z=a},44035:function(e,t,n){var r=n(67294),a=n(25026);t.Z=function(e){const t=e.noShadow||!1,n=e.width,o=e.height,i=(0,a.Z)(e.imageSource);return t?r.createElement("div",{class:"figure noshadow"},r.createElement("a",{href:i,target:"_blank"},r.createElement("img",{width:n,height:o,src:i})),r.createElement("p",null,e.children)):r.createElement("div",{class:"figure"},r.createElement("a",{href:i,target:"_blank"},r.createElement("img",{width:n,height:o,src:i})),r.createElement("p",null,e.children))}},29415:function(e,t,n){var r=n(67294),a=n(88678);const o=r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},r.createElement("path",{"fill-rule":"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}));class i extends r.Component{render(){return r.createElement(a.Z,{color:"var(--highlight-color-further-reading)",header:"Further reading",type:"further-reading",icon:o},this.props.children)}}t.Z=i},88678:function(e,t,n){var r=n(67294);class a extends r.Component{render(){const e=`highlight highlight-${this.props.type}`;return r.createElement("div",{class:e},r.createElement("div",{class:"highlight-heading"},r.createElement("h5",null,r.createElement("div",{class:"highlight-icon"},this.props.icon),this.props.header)),r.createElement("div",{class:"highlight-content"},this.props.children))}}t.Z=a},93054:function(e,t,n){var r=n(67294),a=n(88678);const o=r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},r.createElement("path",{"fill-rule":"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}));class i extends r.Component{render(){return r.createElement(a.Z,{color:"var(--highlight-color-note)",header:"Note",type:"note",icon:o},this.props.children)}}t.Z=i},39130:function(e,t,n){n.d(t,{Z:function(){return v}});var r=n(67294),a=n(73727),o=n(11368),i=n(35096),l=n(84487);const c=(0,r.createContext)({collectLink:()=>{}});var d=n(25026),u=n(67023),p=Object.defineProperty,s=Object.defineProperties,h=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,k=(e,t,n)=>t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,T=(e,t)=>{for(var n in t||(t={}))g.call(t,n)&&k(e,n,t[n]);if(m)for(var n of m(t))f.call(t,n)&&k(e,n,t[n]);return e};var v=function(e){var t,n=e,{isNavLink:p,to:k,href:v,activeClassName:b,isActive:G,"data-noBrokenLinkCheck":C,autoAddBaseUrl:N=!0}=n,S=((e,t)=>{var n={};for(var r in e)g.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&m)for(var r of m(e))t.indexOf(r)<0&&f.call(e,r)&&(n[r]=e[r]);return n})(n,["isNavLink","to","href","activeClassName","isActive","data-noBrokenLinkCheck","autoAddBaseUrl"]);const{siteConfig:{trailingSlash:X,baseUrl:y}}=(0,o.Z)(),{withBaseUrl:F}=(0,d.C)(),w=(0,r.useContext)(c),M=k||v,x=(0,i.Z)(M),D=null==M?void 0:M.replace("pathname://","");let A=void 0!==D?(O=D,N&&(e=>e.startsWith("/"))(O)?F(O):O):void 0;var O;A&&x&&(A=(0,u.applyTrailingSlash)(A,{trailingSlash:X,baseUrl:y}));const E=(0,r.useRef)(!1),R=p?a.OL:a.rU,_=l.Z.canUseIntersectionObserver,I=(0,r.useRef)();(0,r.useEffect)((()=>(!_&&x&&null!=A&&window.docusaurus.prefetch(A),()=>{_&&I.current&&I.current.disconnect()})),[I,A,_,x]);const B=null!==(t=null==A?void 0:A.startsWith("#"))&&void 0!==t&&t,L=!A||!x||B;return A&&x&&!B&&!C&&w.collectLink(A),L?r.createElement("a",T(T({href:A},M&&!x&&{target:"_blank",rel:"noopener noreferrer"}),S)):r.createElement(R,T((H=T({},S),s(H,h({onMouseEnter:()=>{E.current||null==A||(window.docusaurus.preload(A),E.current=!0)},innerRef:e=>{var t,n;_&&e&&x&&(t=e,n=()=>{null!=A&&window.docusaurus.prefetch(A)},I.current=new window.IntersectionObserver((e=>{e.forEach((e=>{t===e.target&&(e.isIntersecting||e.intersectionRatio>0)&&(I.current.unobserve(t),I.current.disconnect(),n())}))})),I.current.observe(t))},to:A||""}))),p&&{isActive:G,activeClassName:b}));var H}},35096:function(e,t,n){function r(e){return!0===/^(\w*:|\/\/)/.test(e)}function a(e){return void 0!==e&&!r(e)}n.d(t,{b:function(){return r},Z:function(){return a}})},25026:function(e,t,n){n.d(t,{C:function(){return o},Z:function(){return i}});var r=n(11368),a=n(35096);function o(){const{siteConfig:{baseUrl:e="/",url:t}={}}=(0,r.Z)();return{withBaseUrl:(n,r)=>function(e,t,n,{forcePrependBaseUrl:r=!1,absolute:o=!1}={}){if(!n)return n;if(n.startsWith("#"))return n;if((0,a.b)(n))return n;if(r)return t+n;const i=n.startsWith(t)?n:t+n.replace(/^\//,"");return o?e+i:i}(t,e,n,r)}}function i(e,t={}){const{withBaseUrl:n}=o();return n(e,t)}},67271:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){const{trailingSlash:n,baseUrl:r}=t;if(e.startsWith("#"))return e;if(void 0===n)return e;const[a]=e.split(/[#?]/),o="/"===a||a===r?a:(i=a,n?function(e){return e.endsWith("/")?e:`${e}/`}(i):function(e){return e.endsWith("/")?e.slice(0,-1):e}(i));var i;return e.replace(a,o)}},67023:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.uniq=t.applyTrailingSlash=void 0;var a=n(67271);Object.defineProperty(t,"applyTrailingSlash",{enumerable:!0,get:function(){return r(a).default}});var o=n(11080);Object.defineProperty(t,"uniq",{enumerable:!0,get:function(){return r(o).default}})},11080:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return Array.from(new Set(e))}},39370:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return T},contentTitle:function(){return v},metadata:function(){return b},toc:function(){return G},default:function(){return N}});var r=n(3905),a=n(44035),o=n(93054),i=n(29415),l=n(22425),c=n(70814),d=n(39130),u=Object.defineProperty,p=Object.defineProperties,s=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,f=(e,t,n)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,k=(e,t)=>{for(var n in t||(t={}))m.call(t,n)&&f(e,n,t[n]);if(h)for(var n of h(t))g.call(t,n)&&f(e,n,t[n]);return e};const T={id:"touchgfx-generator",title:"Generator\u30e6\u30fc\u30b6\uff65\u30ac\u30a4\u30c9"},v=void 0,b={unversionedId:"development/touchgfx-hal-development/touchgfx-generator",id:"development/touchgfx-hal-development/touchgfx-generator",isDocsHomePage:!1,title:"Generator\u30e6\u30fc\u30b6\uff65\u30ac\u30a4\u30c9",description:"TouchGFX Generator, a part of X-CUBE-TOUCHGFX, is a STM32CubeMX Additional-Software component that helps developers configure TouchGFX to run on their hardware platform. Based on existing STM32CubeMX settings and user input TouchGFX Generator will generate the files required to configure a working TouchGFX application. \u3053\u3053\u306b\u306f\u3001TouchGFX HAL\u3001TouchGFX OSAL\u3001\u304a\u3088\u3073TouchGFX\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u304c\u542b\u307e\u308c\u3066\u3044\u307e\u3059\u3002",source:"@site/i18n/ja/docusaurus-plugin-content-docs/current/development/touchgfx-hal-development/touchgfx-generator.mdx",sourceDirName:"development/touchgfx-hal-development",slug:"/development/touchgfx-hal-development/touchgfx-generator",permalink:"/4.18/ja/docs/development/touchgfx-hal-development/touchgfx-generator",tags:[],version:"current",frontMatter:{id:"touchgfx-generator",title:"Generator\u30e6\u30fc\u30b6\uff65\u30ac\u30a4\u30c9"},sidebar:"docs",previous:{title:"\u62bd\u8c61\u5316\u30ec\u30a4\u30e4\uff65\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3",permalink:"/4.18/ja/docs/development/touchgfx-hal-development/touchgfx-architecture"},next:{title:"LTDC / \u30d1\u30e9\u30ec\u30ebRGB",permalink:"/4.18/ja/docs/development/touchgfx-hal-development/scenarios/scenarios-ltdc-parallel-rgb"}},G=[{value:"TouchGFX Generator\u306e\u6709\u52b9\u5316",id:"enabling-touchgfx-generator",children:[],level:2},{value:"\u751f\u6210\u3055\u308c\u308b\u30b3\u30fc\u30c9\u306e\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3",id:"generated-code-architecture",children:[],level:2},{value:"\u6a5f\u80fd\u306e\u6982\u8981",id:"feature-overview",children:[],level:2},{value:"Display",id:"display",children:[{value:"\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u3068\u5bf8\u6cd5",id:"interface-and-dimensions",children:[],level:3},{value:"Framebuffer Pixel Format",id:"framebuffer-pixel-format",children:[],level:3},{value:"Buffering Strategies",id:"buffering-strategies",children:[],level:3}],level:2},{value:"Driver",id:"driver",children:[{value:"Application Tick Source",id:"application-tick-source",children:[],level:3},{value:"Graphics Accelerator",id:"graphics-accelerator",children:[],level:3},{value:"Real-Time Operating System",id:"real-time-operating-system",children:[{value:"\u305d\u306e\u4ed6\u306eCMSIS\u6e96\u62e0OS",id:"other-cmsis-compliant-os",children:[],level:4}],level:3},{value:"Additional features",id:"additional-features",children:[{value:"External Data Reader",id:"external-data-reader",children:[],level:4},{value:"8bitLTDC\u30ab\u30e9\u30fc\uff65\u30eb\u30c3\u30af\u30a2\u30c3\u30d7\uff65\u30c6\u30fc\u30d6\u30eb",id:"8bit-ltdc-color-look-up-table",children:[],level:4}],level:3}],level:2},{value:"Video Decoding",id:"video-decoding",children:[{value:"Type",id:"video-decoding-type",children:[],level:3},{value:"Number of Videos",id:"video-decoding-number",children:[],level:3},{value:"Strategy",id:"video-decoding-strategy",children:[],level:3},{value:"Buffer size",id:"video-decoding-buffer-size",children:[],level:3}],level:2},{value:"\u751f\u6210\u3055\u308c\u308b\u30d7\u30ed\u30b8\u30a7\u30af\u30c8",id:"generated-project",children:[],level:2},{value:"TouchGFX Designer\u30d7\u30ed\u30b8\u30a7\u30af\u30c8",id:"touchgfx-designer\u30d7\u30ed\u30b8\u30a7\u30af\u30c8",children:[],level:2},{value:"\u751f\u6210\u3055\u308c\u305f\u52d5\u4f5c\u306e\u5909\u66f4",id:"\u751f\u6210\u3055\u308c\u305f\u52d5\u4f5c\u306e\u5909\u66f4",children:[],level:2},{value:"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9",id:"upgrading-projects",children:[],level:2}],C={toc:G};function N(e){var t,n=e,{components:u}=n,f=((e,t)=>{var n={};for(var r in e)m.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&h)for(var r of h(e))t.indexOf(r)<0&&g.call(e,r)&&(n[r]=e[r]);return n})(n,["components"]);return(0,r.kt)("wrapper",(t=k(k({},C),f),p(t,s({components:u,mdxType:"MDXLayout"}))),(0,r.kt)("p",null,"TouchGFX Generator, a part of X-CUBE-TOUCHGFX, is a STM32CubeMX Additional-Software component that helps developers configure TouchGFX to run on their hardware platform. Based on existing STM32CubeMX settings and user input TouchGFX Generator will generate the files required to configure a working TouchGFX application. \u3053\u3053\u306b\u306f\u3001TouchGFX HAL\u3001TouchGFX OSAL\u3001\u304a\u3088\u3073TouchGFX\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u304c\u542b\u307e\u308c\u3066\u3044\u307e\u3059\u3002"),(0,r.kt)("p",null,"Once code is generated through STM32CubeMX, the TouchGFX project can be opened through TouchGFX Designer where the UI is developed. TouchGFX Designer automatically adds any additional generated code files to the target IDE project that was configured for the project in STM32CubeMX."),(0,r.kt)("h2",k({},{id:"enabling-touchgfx-generator"}),"TouchGFX Generator\u306e\u6709\u52b9\u5316"),(0,r.kt)("p",null,'Users gain access to adding functionality from X-CUBEs by pressing the "Select Components" button.'),(0,r.kt)(a.Z,{noShadow:!0,imageSource:"/img/development/touchgfx-hal-development/enable-generator.png",mdxType:"Figure"},"Selecting Additional Software in STM32CubeMX"),(0,r.kt)("p",null,"\u6b21\u306e\u56f3\u306f\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u5bfe\u3057\u3066TouchGFX Generator\u3092\u6709\u52b9\u5316\u3059\u308b\u65b9\u6cd5\u3092\u793a\u3057\u3066\u3044\u307e\u3059\u3002"),(0,r.kt)(a.Z,{noShadow:!0,imageSource:"/img/development/touchgfx-hal-development/add-generator-v4.17.png",width:"580",mdxType:"Figure"},"TouchGFX Generator\u306e\u6709\u52b9\u5316"),(0,r.kt)("p",null,"If enabling TouchGFX for a Dual-Core MCU, be sure to enable for the the correct context. TouchGFX can only be enabled for a single context:"),(0,r.kt)(a.Z,{noShadow:!0,imageSource:"/img/development/touchgfx-hal-development/add-generator-dual-core-v4.17.png",mdxType:"Figure"},"Enabling TouchGFX Generator for Dual Core"),(0,r.kt)("h2",k({},{id:"generated-code-architecture"}),"\u751f\u6210\u3055\u308c\u308b\u30b3\u30fc\u30c9\u306e\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3"),(0,r.kt)("p",null,"TouchGFX Generator\u306e\u6a5f\u80fd\u306e\u8aac\u660e\u306e\u524d\u306b\u3001\u751f\u6210\u3055\u308c\u308b\u30b3\u30fc\u30c9\u306e\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3068\u3001\u958b\u767a\u8005\u304c\u305d\u308c\u3092\u4f7f\u7528\u3057\u3066\u8a2d\u5b9a\u3084\u52d5\u4f5c\u3092\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3059\u308b\u65b9\u6cd5\u306b\u3064\u3044\u3066\u7406\u89e3\u3059\u308b\u3053\u3068\u304c\u91cd\u8981\u3067\u3059\u3002"),(0,r.kt)("p",null,"Handwritten user code in files generated by STM32CubeMX is protected through the use of ",(0,r.kt)("strong",{parentName:"p"},"User Code")," sections placed strategically throughout the code generated by STM32CubeMX (C code).\xa0TouchGFX Generator\uff08C++\u30b3\u30fc\u30c9\uff09\u3067\u751f\u6210\u3055\u308c\u308b\u30b3\u30fc\u30c9\u3067\u306f\u3001\u3053\u306e\u67d4\u8edf\u6027\u304c\u4fdd\u6301\u3055\u308c\u3066\u3044\u307e\u3059\u3002"),(0,r.kt)("p",null,"When TouchGFX Generator is added through ",(0,r.kt)("em",{parentName:"p"},"Additional Software")," and enabled, STM32CubeMX will always create a ",(0,r.kt)("em",{parentName:"p"},"TouchGFX")," folder for the project. The folder always contains the same files, regardless of configuration, while the content of the files changes according to STM32CubeMX and User configuration."),(0,r.kt)("p",null,"The listing below shows an overview of the content of a STM32CubeMX project with TouchGFX Generator ",(0,r.kt)("em",{parentName:"p"},"enabled"),", with emphasis on TouchGFX related files. \u30ea\u30b9\u30c8\u306e\u5f8c\u306e\u8868\u306f\u3001\u6700\u3082\u91cd\u8981\u306a\u30a8\u30f3\u30c8\u30ea\u306e\u5f79\u5272\u3092\u6982\u8aac\u3057\u3066\u3044\u307e\u3059\u3002"),(0,r.kt)(l.Z,{mdxType:"CodeHeader"},"TouchGFX \u30d5\u30a9\u30eb\u30c0"),(0,r.kt)("pre",null,(0,r.kt)("code",k({parentName:"pre"},{}),"\u2502   .mxproject\n\u2502   myproject.ioc\n\u251c\u2500\u2500\u2500Core\n\u251c\u2500\u2500\u2500Drivers\n\u251c\u2500\u2500\u2500EWARM\n\u251c\u2500\u2500\u2500Middlewares\n\u2514\u2500\u2500\u2500TouchGFX\n    \u2502   ApplicationTemplate.touchgfx.part\n    \u251c\u2500\u2500\u2500App\n    \u2502       app_touchgfx.c\n    \u2502       app_touchgfx.h\n    \u2514\u2500\u2500\u2500target\n        \u2502   STM32TouchController.cpp\n        \u2502   STM32TouchController.hpp\n        \u2502   TouchGFXGPIO.cpp\n        \u2502   TouchGFXHAL.cpp\n        \u2502   TouchGFXHAL.hpp\n        \u2502\n        \u2514\u2500\u2500\u2500generated\n                OSWrappers.cpp\n                TouchGFXConfiguration.cpp\n                TouchGFXGeneratedHAL.cpp\n                TouchGFXGeneratedHAL.hpp\n")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",k({parentName:"tr"},{align:null}),"\u30d5\u30a9\u30eb\u30c0"),(0,r.kt)("th",k({parentName:"tr"},{align:null}),"Responsibility"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",k({parentName:"tr"},{align:null}),"myproject.ioc"),(0,r.kt)("td",k({parentName:"tr"},{align:null}),"STM32CubeMX Project file")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",k({parentName:"tr"},{align:null}),"Core"),(0,r.kt)("td",k({parentName:"tr"},{align:null}),(0,r.kt)("inlineCode",{parentName:"td"},"main.c")," \u3068\u8d77\u52d5\u30b3\u30fc\u30c9")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",k({parentName:"tr"},{align:null}),"Drivers"),(0,r.kt)("td",k({parentName:"tr"},{align:null}),"CMSIS\u3068\u30de\u30a4\u30af\u30ed\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\uff65\u30d5\u30a1\u30df\u30ea\u306e\u30c9\u30e9\u30a4\u30d0")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",k({parentName:"tr"},{align:null}),"EWARM"),(0,r.kt)("td",k({parentName:"tr"},{align:null}),"IDE\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\uff65\u30d5\u30a9\u30eb\u30c0\u3002 EWARM\u3001MDK-ARM\u3001STM32CubeIDE\u306e\u3044\u305a\u308c\u304b")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",k({parentName:"tr"},{align:null}),"Middlewares"),(0,r.kt)("td",k({parentName:"tr"},{align:null}),"TouchGFX\u30e9\u30a4\u30d6\u30e9\u30ea / \u30d8\u30c3\u30c0\u30d5\u30a1\u30a4\u30eb\u3068\u3001\u30b5\u30fc\u30c9\u30d1\u30fc\u30c6\u30a3\uff65\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\uff08FreeRTOS\u306a\u3069\uff09\u304c\u542b\u307e\u308c\u307e\u3059\u3002")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",k({parentName:"tr"},{align:null}),"ApplicationTemplate.touchgfx.part"),(0,r.kt)("td",k({parentName:"tr"},{align:null}),"The .part file is updated by STM32CubeMX with information that is relevant to TouchGFX Designer project, e.g. screen dimensions and bit depth")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",k({parentName:"tr"},{align:null}),"App"),(0,r.kt)("td",k({parentName:"tr"},{align:null}),"X-CUBE interface to STM32CubeMX. ",(0,r.kt)("inlineCode",{parentName:"td"},"app_touchgfx.c")," \u306b\u306f\u3001\u95a2\u6570",(0,r.kt)("inlineCode",{parentName:"td"},"MX_TouchGFX_Process(void)"),"\u304a\u3088\u3073 ",(0,r.kt)("inlineCode",{parentName:"td"},"MX_TouchGFX_Init(void)")," \u306e\u5b9a\u7fa9\u304c\u542b\u307e\u308c\u307e\u3059\u3002\u3053\u308c\u3089\u306e\u95a2\u6570\u306fTouchGFX\u3092\u521d\u671f\u5316\u3057\u3066\u30e1\u30a4\u30f3\uff65\u30eb\u30fc\u30d7\u3092\u958b\u59cb\u3059\u308b\u305f\u3081\u306b\u4f7f\u7528\u3055\u308c\u307e\u3059\u3002")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",k({parentName:"tr"},{align:null}),"target/generated"),(0,r.kt)("td",k({parentName:"tr"},{align:null}),"This sub-folder contains the read-only files that get overwritten by STM32CubeMX when configurations change. ",(0,r.kt)("inlineCode",{parentName:"td"},"TouchGFXGeneratedHAL.cpp")," is a sub-class of the TouchGFX class ",(0,r.kt)("inlineCode",{parentName:"td"},"HAL")," and contains the code that STM32CubeMX can generate based on its current configuration. ",(0,r.kt)("inlineCode",{parentName:"td"},"OSWrappers.cpp"),"OSAL\uff09\u306b\u306fTouchGFX\u30a8\u30f3\u30b8\u30f3\u3068\u306e\u540c\u671f\u306b\u5fc5\u8981\u306a\u95a2\u6570\u304c\u542b\u307e\u308c\u307e\u3059\u3002\u6700\u5f8c\u306b",(0,r.kt)("inlineCode",{parentName:"td"},"TouchGFXConfiguration.cpp")," \u306b\u306f\u3001TouchGFX\u306e\u69cb\u7bc9\u304a\u3088\u3073\u8a2d\u5b9a\u306e\u305f\u3081\u306e\u30b3\u30fc\u30c9\u304c\u542b\u307e\u308c\u307e\u3059\uff08HAL\u3092\u542b\u3080\uff09\u3002")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",k({parentName:"tr"},{align:null}),"target"),(0,r.kt)("td",k({parentName:"tr"},{align:null}),"Contains the bulk of files that can be modified by the user to extend the behavior of the HAL or to override configurations generated by STM32CubeMX. ",(0,r.kt)("inlineCode",{parentName:"td"},"STM32TouchController.cpp"),"\u306b\u306f\u3001\u7a7a\u306e\u30bf\u30c3\u30c1\uff65\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\uff65\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u304c\u542b\u307e\u308c\u307e\u3059\u3002 ",(0,r.kt)("inlineCode",{parentName:"td"},"TouchGFXHAL.cpp")," \u306f\u3001",(0,r.kt)("inlineCode",{parentName:"td"},"TouchGFXGeneratedHAL"),"\u306e\u30b5\u30d6\u30af\u30e9\u30b9",(0,r.kt)("inlineCode",{parentName:"td"},"TouchGFXHAL"),",\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002")))),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"TouchGFXConfiguration.cpp"),"\u306b\u306fHAL\u3092\u69cb\u7bc9\u3059\u308b\u95a2\u6570\u3068TouchGFX\u306e\u30e1\u30a4\u30f3\uff65\u30eb\u30fc\u30d7\u3092\u958b\u59cb\u3059\u308b\u95a2\u6570\u304c\u542b\u307e\u308c\u308b\u3053\u3068\u3092\u628a\u63e1\u3057\u3066\u304a\u304f\u3053\u3068\u304c\u91cd\u8981\u3067\u3059\u3002 \u8ffd\u52a0\u8a2d\u5b9a\u306f\u3001\u7de8\u96c6\u53ef\u80fd\u306a\u30e6\u30fc\u30b6\u30af\u30e9\u30b9",(0,r.kt)("inlineCode",{parentName:"p"},"TouchGFXHAL"),"\u306b\u3066\u884c\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002 HAL\u306e\u4e00\u822c\u7684\u306a\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306f\u6b21\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002"),(0,r.kt)(a.Z,{imageSource:"/img/development/touchgfx-hal-development/code-architecture.png",noShadow:!0,width:"200",mdxType:"Figure"},"Hierarchy of generated code"),(0,r.kt)("h2",k({},{id:"feature-overview"}),"\u6a5f\u80fd\u306e\u6982\u8981"),(0,r.kt)("p",null,"Having enabled TouchGFX Generator, four groups exist in the user interface:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("em",{parentName:"strong"},"Dependencies"))," - \u3053\u306e\u30b0\u30eb\u30fc\u30d7\u306b\u306f\u4f9d\u5b58\u95a2\u4fc2\u3001\u8b66\u544a\u3001\u307e\u305f\u306f\u8a2d\u5b9a\u5185\u306e\u5177\u4f53\u7684\u306a\u30a8\u30e9\u30fc\u306b\u95a2\u3059\u308b\u958b\u767a\u8005\u3078\u306e\u901a\u77e5\u304c\u542b\u307e\u308c\u307e\u3059\u3002 \u30a8\u30f3\u30c8\u30ea\u304c\u5b58\u5728\u3057\u306a\u3044\u5834\u5408\u3001\u3053\u306e\u30b0\u30eb\u30fc\u30d7\u306f\u975e\u8868\u793a\u306b\u306a\u308a\u307e\u3059\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("em",{parentName:"strong"},"Display"))," - \u3053\u306e\u30b0\u30eb\u30fc\u30d7\u306b\u306f\u30c7\u30a3\u30b9\u30d7\u30ec\u30a4\u306b\u95a2\u9023\u3059\u308b\u8a2d\u5b9a\uff08\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u3001\u30d5\u30ec\u30fc\u30e0\u30d0\u30c3\u30d5\u30a1\u306e\u30d3\u30c3\u30c8\u6df1\u5ea6\u3001\u5e45\u3001\u9ad8\u3055\u306a\u3069\uff09\u304c\u542b\u307e\u308c\u307e\u3059\u3002 \u3053\u308c\u3089\u306e\u8a2d\u5b9a\u306f\u3001TouchGFX\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30ad\u30e3\u30f3\u30d0\u30b9\u306e\u30b5\u30a4\u30ba\u3084\u3001\u30a2\u30bb\u30c3\u30c8\u7528\u306b\u751f\u6210\u3055\u308c\u308b\u30b3\u30fc\u30c9\u306b\u76f4\u63a5\u5f71\u97ff\u3057\u307e\u3059\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("em",{parentName:"strong"},"Driver"))," - \u3053\u306e\u30b0\u30eb\u30fc\u30d7\u3067\u306f\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3001\u30b0\u30e9\u30d5\u30a3\u30c3\u30af\uff65\u30a2\u30af\u30bb\u30e9\u30ec\u30fc\u30b7\u30e7\u30f3\u3001RTOS\u306e\u30c6\u30a3\u30c3\u30af\uff65\u30bd\u30fc\u30b9\u306b\u95a2\u9023\u3059\u308b\u591a\u304f\u306e\u65e2\u88fd\u306e\u30c9\u30e9\u30a4\u30d0\u306b\u5bfe\u3057\u3066\u30e6\u30fc\u30b6\u304c\u30aa\u30d7\u30c8\u30a4\u30f3\u3067\u304d\u307e\u3059\u3002 Since STM32CubeMX supports FreeRTOS (CMSIS RTOS v1 and v2) configurations, TouchGFX Generator provides drivers for each of these options."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("em",{parentName:"strong"},"Video Decoding"))," - This group allows the user to enable hardware or software video decoding. This option is necessary to work with the video widget. Note that not all MCUs support video decoding.")),(0,r.kt)(a.Z,{noShadow:!0,imageSource:"/img/development/touchgfx-hal-development/touchgfx-generator/four-sections.png",width:"600",mdxType:"Figure"},"TouchGFX Generator has four groups: Dependencies, Display, Driver and Video Decoding"),(0,r.kt)("h2",k({},{id:"display"}),"Display"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Display")," \u30b0\u30eb\u30fc\u30d7\u306b\u306f\u3001\u30c7\u30a3\u30b9\u30d7\u30ec\u30a4\u306b\u95a2\u9023\u3059\u308b\u8a2d\u5b9a\uff08\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u3001\u5bf8\u6cd5\u3001\u30d0\u30c3\u30d5\u30a1\u30ea\u30f3\u30b0\u6226\u7565\u306a\u3069\uff09\u304c\u542b\u307e\u308c\u307e\u3059\u3002"),(0,r.kt)("h3",k({},{id:"interface-and-dimensions"}),"\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u3068\u5bf8\u6cd5"),(0,r.kt)("p",null,"\u73fe\u5728\u3001STM32\u30de\u30a4\u30af\u30ed\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u3067\u306f\u3001\u6b21\u306b\u793a\u3059\u3088\u3046\u306a\u8907\u6570\u306e\u30c7\u30a3\u30b9\u30d7\u30ec\u30a4\uff65\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u3092\u4f7f\u7528\u3067\u304d\u307e\u3059\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Parallel RGB (LTDC)"),(0,r.kt)("li",{parentName:"ul"},"MIPI DSI"),(0,r.kt)("li",{parentName:"ul"},"FMC"),(0,r.kt)("li",{parentName:"ul"},"SPI")),(0,r.kt)("p",null,"In the case of MCUs with a display connected to an LTDC or FMC ",(0,r.kt)("em",{parentName:"p"},"TouchGFX Generator")," can generate code to transfer the framebuffer to the connected display. For DSI and SPI interfaces drivers must be implemented by developers themselves."),(0,r.kt)(i.Z,{mdxType:"FurtherReading"},"See section ",(0,r.kt)(d.Z,{to:"scenarios/scenarios-ltdc-parallel-rgb",mdxType:"Link"},"Scenarios")," for concrete examples of code for different display interfaces."),(0,r.kt)("h3",k({},{id:"framebuffer-pixel-format"}),"Framebuffer Pixel Format"),(0,r.kt)("p",null,'The following framebuffer pixel formats are currently supported by TouchGFX Generator. All options are available when using "Custom" display interface, otherwise options are restricted to display controller settings (e.g. configuring the LTDC Framebuffer format to "RGB565" will limit the options to "RGB565" in TouchGFX Generator).'),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"BW (1bpp)"),(0,r.kt)("li",{parentName:"ol"},"Grey2 (2bpp)"),(0,r.kt)("li",{parentName:"ol"},"Grey4 (4bpp)"),(0,r.kt)("li",{parentName:"ol"},"ABRG2222 (8bpp)"),(0,r.kt)("li",{parentName:"ol"},"ARGB2222 (8bpp)"),(0,r.kt)("li",{parentName:"ol"},"BGRA2222 (8bpp)"),(0,r.kt)("li",{parentName:"ol"},"RGBA2222 (8bpp)"),(0,r.kt)("li",{parentName:"ol"},"RGB565 (16bpp)"),(0,r.kt)("li",{parentName:"ol"},"RGB888 (24bpp)"),(0,r.kt)("li",{parentName:"ol"},"ARGB8888 (32bpp)"),(0,r.kt)("li",{parentName:"ol"},"XRGB8888 (32bpp)")),(0,r.kt)(o.Z,{mdxType:"Note"},"Some pixel formats have no- or only partial ChromART (DMA2D) support."),(0,r.kt)(c.Z,{mdxType:"Caution"},(0,r.kt)("b",null,"For Cortex F7/H7"),": If the framebuffer is placed in Write Through cached memory (e.g. SRAM) then the DCache is flushed by the generated code prior to DMA2D (if configured in the Generator) accessing it. Remember to enable ",(0,r.kt)("b",null,"CPU Cache")," in the ",(0,r.kt)("b",null,"System Core")," settings for ",(0,r.kt)("b",null,"Cortex M7")," in STM32CubeMX in order for this caching mechanic to work."),(0,r.kt)(i.Z,{mdxType:"FurtherReading"},"See the ",(0,r.kt)(d.Z,{to:"../board-bring-up/how-to/02-cpu-running#cache-on-f7-and-h7",mdxType:"Link"},"Cache on F7 and H7")," subsection for more information about CPU caching."),(0,r.kt)("h3",k({},{id:"buffering-strategies"}),"Buffering Strategies"),(0,r.kt)("p",null,"TouchGFX Generator\u3092\u4ecb\u3057\u3066\u3001\u6b21\u306e\u30d5\u30ec\u30fc\u30e0\u30d0\u30c3\u30d5\u30a1\u6226\u7565\u3092\u8a2d\u5b9a\u3067\u304d\u307e\u3059\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Single Buffer"),"- \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\uff65\u30d5\u30ec\u30fc\u30e0\u30d0\u30c3\u30d5\u30a1\u30921\u3064\u3060\u3051\u4f7f\u7528\u3057\u307e\u3059\u3002 \u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u304c\u5236\u9650\u3055\u308c\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u30e1\u30e2\u30ea\u306e\u4f7f\u7528\u91cf\u306f\u5c11\u306a\u304f\u3066\u6e08\u307f\u307e\u3059\u3002 \uff3bBuffer Location\uff3d\u8a2d\u5b9a\u3067\u4f7f\u7528\u3057\u3066\u3001\u5185\u90e8RAM\u306b\u914d\u7f6e\u3067\u304d\u307e\u3059\u3002 \u3055\u3089\u306b\u6700\u9069\u5316\u3059\u308b\u306b\u306f\u3001\u30c7\u30a3\u30b9\u30d7\u30ec\u30a4\uff65\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u306b\u3088\u3063\u3066\u73fe\u5728\u51e6\u7406\u3055\u308c\u3066\u3044\u308b\u30e9\u30a4\u30f3\u3092\u8fd4\u3059\u95a2\u6570\u3092\u30e6\u30fc\u30b6\u304c\u5b9a\u7fa9\u3067\u304d\u307e\u3059\u3002 \u3053\u306e\u65b9\u6cd5\u306f\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306b\u3088\u3063\u3066\u4f7f\u7528\u3055\u308c\u3001\u3053\u306e\u30d5\u30ec\u30fc\u30e0\u3067\u3059\u3067\u306b\u30c7\u30a3\u30b9\u30d7\u30ec\u30a4\u306b\u8ee2\u9001\u6e08\u307f\u306e\u30e1\u30e2\u30ea\u3078\u306e\u66f4\u65b0\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Double Buffer")," - 2\u3064\u306e\u30d5\u30ec\u30fc\u30e0\u30d0\u30c3\u30d5\u30a1\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002 \u901a\u5e38\u3001\u591a\u304f\u306e\u30e1\u30e2\u30ea\u3092\u5fc5\u8981\u3068\u3057\u307e\u3059\u304c\u3001\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u304c\u5411\u4e0a\u3057\u307e\u3059\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Partial Buffer"),"- 1\u3064\u4ee5\u4e0a\u306e\u30e6\u30fc\u30b6\u5b9a\u7fa9\u306e\u30e1\u30e2\u30ea\u9818\u57df\u3092\u30d5\u30ec\u30fc\u30e0\u30d0\u30c3\u30d5\u30a1\u3068\u3057\u3066\u4f7f\u7528\u3057\u307e\u3059\u3002 \u3053\u306e\u6226\u7565\u306f\u5916\u90e8RAM\u306b\u983c\u3089\u306a\u3044\u304c\u3001\u30c7\u30a3\u30b9\u30d7\u30ec\u30a4\u306e\u30d5\u30ec\u30fc\u30e0\u30d0\u30c3\u30d5\u30a1\u5168\u4f53\u3067\u306f\u4f7f\u7528\u53ef\u80fd\u306a\u30e1\u30e2\u30ea\u91cf\u3092\u8d85\u3048\u308b\u53ef\u80fd\u6027\u304c\u3042\u308b\u5834\u5408\u306e\u4f4e\u30b3\u30b9\u30c8\u306e\u30bd\u30ea\u30e5\u30fc\u30b7\u30e7\u30f3\u3092\u30bf\u30fc\u30b2\u30c3\u30c8\u306b\u3057\u3066\u3044\u307e\u3059\u3002")),(0,r.kt)("p",null,"\u30b7\u30f3\u30b0\u30eb\u30fb\u30d0\u30c3\u30d5\u30a1\u3068\u30c0\u30d6\u30eb\u30fb\u30d0\u30c3\u30d5\u30a1\u306e\u5834\u5408\u3001\u30e6\u30fc\u30b6\u306f\uff3bBuffer Location\uff3d\u8a2d\u5b9a\u3067\u6b21\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4f7f\u7528\u3057\u3066\u5834\u6240\u3092\u8a2d\u5b9a\u3067\u304d\u307e\u3059\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"By Allocation")," - \u30ea\u30f3\u30ab\u304c\u30ea\u30f3\u30ab\uff65\u30b9\u30af\u30ea\u30d7\u30c8\u306b\u5f93\u3063\u3066\u30d5\u30ec\u30fc\u30e0\u30d0\u30c3\u30d5\u30a1\u306e\u30e1\u30e2\u30ea\u3092\u914d\u7f6e\u3067\u304d\u307e\u3059\u3002 \u30c7\u30d5\u30a9\u30eb\u30c8\u306f\u5185\u90e8RAM\u3067\u3059\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"By Address")," - \u30e6\u30fc\u30b6\u304c1\u3064\uff08\u30b7\u30f3\u30b0\u30eb\uff09\u307e\u305f\u306f2\u3064\uff08\u30c0\u30d6\u30eb\uff09\u306e\u30d5\u30ec\u30fc\u30e0\u30d0\u30c3\u30d5\u30a1\uff65\u30a2\u30c9\u30ec\u30b9\u3092\u5b9a\u7fa9\u3067\u304d\u307e\u3059\u3002")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u30d1\u30fc\u30b7\u30e3\u30eb\u30fb\u30d0\u30c3\u30d5\u30a1"),"\u6226\u7565\u3067\u306f\u3001\u30e6\u30fc\u30b6\u306f\u4ee5\u4e0b\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u5b9a\u7fa9\u3067\u304d\u307e\u3059\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u30d6\u30ed\u30c3\u30af\u6570(\u5e38\u306b\u5185\u90e8RAM\u306b\u914d\u7f6e\u3055\u308c\u308b)"),(0,r.kt)("li",{parentName:"ul"},"\u30d6\u30ed\u30c3\u30af\uff65\u30b5\u30a4\u30ba(\u30d0\u30a4\u30c8)")),(0,r.kt)("p",null,"\u30d1\u30fc\u30b7\u30e3\u30eb\uff65\u30d0\u30c3\u30d5\u30a1\u6226\u7565\u306b\u95a2\u3059\u308b\u4e2d\u5fc3\u7684\u306a\u6982\u5ff5\u3092\u7406\u89e3\u3059\u308b\u306b\u306f\u3001\u30d1\u30fc\u30b7\u30e3\u30eb\uff65\u30d5\u30ec\u30fc\u30e0\u30d0\u30c3\u30d5\u30a1\u3092\u4f7f\u7528\u3057\u3066\u30e1\u30e2\u30ea\u8981\u4ef6\u3092\u8efd\u6e1b\u3059\u308b\u65b9\u6cd5\u306b\u95a2\u3059\u308b",(0,r.kt)("a",k({parentName:"p"},{href:"../scenarios/lowering-memory-usage-with-partial-framebuffer"}),"\u5c02\u9580\u306e\u8a18\u4e8b"),"\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002 \u3053\u306e\u8a18\u4e8b\u306f\u30d1\u30fc\u30b7\u30e3\u30eb\uff65\u30d5\u30ec\u30fc\u30e0\u30d0\u30c3\u30d5\u30a1\u3092\u5b9f\u73fe\u3059\u308b\u65b9\u6cd5\u3092\u6982\u5ff5\u7684\u306b\u793a\u3057\u305f\u3082\u306e\u306a\u306e\u3067\u3001\u3053\u306e\u8a18\u4e8b\u306b\u793a\u3059\u30b3\u30fc\u30c9\u306fTouchGFX Generator\u306b\u3088\u3063\u3066\u751f\u6210\u3055\u308c\u308b\u30b3\u30fc\u30c9\u3068\u5c11\u3057\u7570\u306a\u3063\u3066\u3044\u307e\u3059\u3002 \u3053\u308c\u3089\u306e\u6226\u7565\u3067\u751f\u6210\u3055\u308c\u308b\u30b3\u30fc\u30c9\u306e\u5177\u4f53\u4f8b\u306b\u3064\u3044\u3066\u306f\u3001\u300c",(0,r.kt)("a",k({parentName:"p"},{href:"scenarios/scenarios-framebuffer-strategies"}),"\u30d5\u30ec\u30fc\u30e0\u30d0\u30c3\u30d5\u30a1\u6226\u7565"),"\u300d\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),(0,r.kt)("h2",k({},{id:"driver"}),"Driver"),(0,r.kt)("p",null,"\uff3bDriver\uff3d\u30bb\u30af\u30b7\u30e7\u30f3\u3067\u306f\u3001TouchGFX AL\u306e\u3055\u307e\u3056\u307e\u306a\u5f79\u5272\u306b\u5bfe\u5fdc\u3059\u308b\u30c9\u30e9\u30a4\u30d0\u3092\u958b\u767a\u8005\u304c\u9078\u629e\u3067\u304d\u307e\u3059\u3002"),(0,r.kt)("h3",k({},{id:"application-tick-source"}),"Application Tick Source"),(0,r.kt)("p",null,"\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30c6\u30a3\u30c3\u30af\uff65\u30bd\u30fc\u30b9\u306f\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u524d\u9032\u3055\u305b\u308b\u65b9\u6cd5\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002 \u958b\u767a\u8005\u306f\u4ee5\u4e0b\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4f7f\u7528\u3067\u304d\u307e\u3059\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"LTDC"),' - If LTDC is selected as the interface the "Display" group the Application Tick Source can be "LTDC". \u3064\u307e\u308a\u3001TouchGFX Generator\u304c',(0,r.kt)("inlineCode",{parentName:"li"},"TouchGFXGeneratedHAL")," \u30af\u30e9\u30b9\u306b\u30c9\u30e9\u30a4\u30d0\u95a2\u6570(LTDC\u5272\u8fbc\u307f\u30cf\u30f3\u30c9\u30e9)\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3001\u305d\u308c\u304c",(0,r.kt)("inlineCode",{parentName:"li"},"OSWrappers::signalVSync()"),".\u3092\u547c\u3073\u51fa\u3057\u3066\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u524d\u9032\u3055\u305b\u307e\u3059\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Custom and FMC")," - In this case, the developer is required to implement a handler that drives the application forward by calling ",(0,r.kt)("inlineCode",{parentName:"li"},"OSWrappers::signalVSync()")," repeatedly.")),(0,r.kt)("h3",k({},{id:"graphics-accelerator"}),"Graphics Accelerator"),(0,r.kt)("p",null,"\u30b0\u30e9\u30d5\u30a3\u30c3\u30af\uff65\u30a2\u30af\u30bb\u30e9\u30ec\u30fc\u30b7\u30e7\u30f3\u306b\u95a2\u3057\u3066\u3001\u958b\u767a\u8005\u306b\u306f\u6b21\u306e3\u3064\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u3042\u308a\u307e\u3059\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"None"),"- \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306fCPU\u306e\u307f\u3092\u4f7f\u7528\u3057\u3066\u30d5\u30ec\u30fc\u30e0\u3092\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u3057\u307e\u3059\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Chrom-ART (DMA2D)")," - \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306f\u53ef\u80fd\u3067\u3042\u308c\u3070Chrom-ART\u6a5f\u80fd\u3092\u4f7f\u7528\u3057\u3066\u30d4\u30af\u30bb\u30eb\u306e\u79fb\u52d5\u3084\u30d6\u30ec\u30f3\u30c9\u3092\u884c\u3044\u3001CPU\u30b5\u30a4\u30af\u30eb\u3092\u89e3\u653e\u3057\u307e\u3059\u3002 TouchGFX Generator\u306b\u3088\u3063\u3066\u30c9\u30e9\u30a4\u30d0\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u308b\u306e\u3067\u3001\u958b\u767a\u8005\u306b\u3088\u308b\u30a2\u30af\u30b7\u30e7\u30f3\u306f\u5fc5\u8981\u3042\u308a\u307e\u305b\u3093\u3002")),(0,r.kt)("p",null,"TouchGFX Generator\u304b\u3089\u63d0\u4f9b\u3055\u308c\u308bChrom-ART\uff08DMA2D\uff09\u30c9\u30e9\u30a4\u30d0\u306f\u3001TransferCompleteInterrupt\u306e\u53d7\u4fe1\u65b9\u6cd5\u3068\u3057\u3066\u6b21\u306e2\u3064\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u3059\u3002"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"TM32Cube HAL\u30c9\u30e9\u30a4\u30d0\u3092\u4f7f\u7528\u3057\u3066\u3001dma2d\u30cf\u30f3\u30c9\u30e9\u306b\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u95a2\u6570",(0,r.kt)("inlineCode",{parentName:"li"},"hdma2d.XferCpltCallback"),"\u3092\u767b\u9332\u3059\u308b\u3002"),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"DMA2D_IRQHandler()"),"\u5272\u8fbc\u307f\u30cf\u30f3\u30c9\u30e9\u3092\u76f4\u63a5\u4f7f\u7528\u3059\u308b\u3002")),(0,r.kt)("p",null,"Switching between these two is done by enabling or disabling the DMA2D global interrupt in the NVIC Settings in STM32CubeMX for DMA2D IP. \u30b0\u30ed\u30fc\u30d0\u30eb\u5272\u8fbc\u307f\u3092\u6709\u52b9\u5316\u3059\u308b\u3068\u30aa\u30d7\u30b7\u30e7\u30f31\u306e\u30b3\u30fc\u30c9\u304c\u751f\u6210\u3055\u308c\u3001\u30b0\u30ed\u30fc\u30d0\u30eb\u5272\u8fbc\u307f\u3092\u7121\u52b9\u5316\u3059\u308b\u3068\u30aa\u30d7\u30b7\u30e7\u30f32\u306e\u30b3\u30fc\u30c9\u304c\u751f\u6210\u3055\u308c\u307e\u3059\u3002"),(0,r.kt)(o.Z,{mdxType:"Note"},(0,r.kt)("li",null,"DMA2D\u306e\u30b0\u30ed\u30fc\u30d0\u30eb\u5272\u8fbc\u307f\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408\u306f\u3001\u300cIRQ\u30cf\u30f3\u30c9\u30e9\u300d\u304c\u300cDMA2D HAL\u30cf\u30f3\u30c9\u30e9\u300d\u3092\u547c\u3073\u51fa\u3059\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\u3053\u308c\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u52d5\u4f5c\u3067\u3059\u3002"),(0,r.kt)("li",null,"\u30b0\u30ed\u30fc\u30d0\u30eb\u5272\u8fbc\u307f\u304c\u6709\u52b9\u3067\u300cIRQ\u30cf\u30f3\u30c9\u30e9\u300d\u3068DMA2D\u306e\u300cHAL\u30cf\u30f3\u30c9\u30e9\u306e\u547c\u3073\u51fa\u3057\u300d\u304c\u7121\u52b9\u306b\u306a\u3063\u3066\u3044\u308b\u5834\u5408\u3001\u767b\u9332\u3055\u308c\u305f\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u304c\u547c\u3073\u51fa\u3055\u308c\u307e\u305b\u3093\u3002")),(0,r.kt)("h3",k({},{id:"real-time-operating-system"}),"Real-Time Operating System"),(0,r.kt)("p",null,"\u958b\u767a\u8005\u306fTouchGFX\u3067\u4efb\u610f\u306eRTOS\u3092\u4f7f\u7528\u3067\u304d\u307e\u3059(OS\u7121\u3057\u3082\u542b\u3080)\u3002 \u300c\u62bd\u8c61\u5316\u30ec\u30a4\u30e4\uff65\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u300d\u3067\u8aac\u660e\u3057\u305f\u3088\u3046\u306b\u3001TouchGFX\u30a8\u30f3\u30b8\u30f3\u306f\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u3092\u4f7f\u7528\u3057\u3066\u3001\u30e6\u30fc\u30b6\u304c\u9078\u629e\u3057\u305fRTOS\u3068\u3001\u30e1\u30a4\u30f3\uff65\u30a4\u30d9\u30f3\u30c8\uff65\u30eb\u30fc\u30d7\u304a\u3088\u3073\u30d5\u30ec\u30fc\u30e0\u30d0\u30c3\u30d5\u30a1\u306e\u30a2\u30af\u30bb\u30b9\u3092\u540c\u671f\u3055\u305b\u307e\u3059\u3002",(0,r.kt)("inlineCode",{parentName:"p"},"OSWrappers")," When developers select an operating system via TouchGFX Generator code will be generated to syncronize internally via primitives for the OS of choice. The operating system still has to be configured through STM32CubeMX to determine stack size, among other things."),(0,r.kt)("p",null,"FreeRTOS (CMSIS OS compliant) and AzureRTOS (For H7s only) can be configured directly from within STM32CubeMX and the TouchGFX Generator providing the user with generated code for both task definitions and TouchGFX RTOS driver. TouchGFX Generator can generate CMSIS V1 and CMSIS V2 compliant RTOS drivers which work with any CMSIS compliant RTOS, a driver for running bare metal without an operating system, and a native driver for ThreadX (Through the AzureRTOS X-Cube). In the case of No Operating Systemn developers cannot rely on STM32CubeMX for code generation of task definitions and this must be done in ",(0,r.kt)("em",{parentName:"p"},"user code"),"."),(0,r.kt)(o.Z,{mdxType:"Note"},"All TouchGFX Board Setups available from the designer run FreeRTOS."),(0,r.kt)("p",null,"The following figure shows these options available through the TouchGFX Generator."),(0,r.kt)(a.Z,{noShadow:!0,imageSource:"/img/development/touchgfx-hal-development/touchgfx-generator/driver-rtos-options-4-17.png",mdxType:"Figure"},"RTOS\u30c9\u30e9\u30a4\u30d0\u306e\u30aa\u30d7\u30b7\u30e7\u30f3"),(0,r.kt)("p",null,'Concretely, in this image, The AzureRTOS X-CUBE has been enabled, allowing the selection of ThreadX and CMSIS RTOS V2 (ThreadX is CMSIS compliant). If FreeRTOS is enabled the "ThreadX" option is disabled. ThreadX can be enabled through the X-CUBE-AZRTOS-H7 (H7 only) pack.'),(0,r.kt)(a.Z,{noShadow:!0,imageSource:"/img/development/touchgfx-hal-development/touchgfx-generator/x-cube-azurertos.png",width:"600",mdxType:"Figure"},"X-CUBE-AZRTOS Configuration"),(0,r.kt)("p",null,"\u6b21\u306e\u95a2\u6570\u3092\u547c\u3073\u51fa\u3059\u3068\u3001TouchGFX\u306e\u30e1\u30a4\u30f3\uff65\u30eb\u30fc\u30d7\u306b\u5165\u308a\u307e\u3059\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",k({parentName:"pre"},{className:"language-cpp"}),"void\xa0MX_TouchGFX_Process(void);\n")),(0,r.kt)("p",null,"\u958b\u767a\u8005\u306fTouchGFX\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u5b9f\u884c\u3057\u305f\u3044\u30bf\u30b9\u30af\u306e\u30bf\u30b9\u30af\uff65\u30cf\u30f3\u30c9\u30e9\u5185\u3067\u3001\u3053\u306e\u95a2\u6570\u3092\u547c\u3073\u51fa\u3059\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002 If the user configured a FeeRTOS task from STM32CubeMX called ",(0,r.kt)("inlineCode",{parentName:"p"},"DefaultTask")," then the following example shows how ",(0,r.kt)("inlineCode",{parentName:"p"},"MX_TouchGFX_Process()")," is called to start TouchGFX in the user code section of its task handler."),(0,r.kt)("pre",null,(0,r.kt)("code",k({parentName:"pre"},{className:"language-cpp",metastring:"{4}","{4}":!0}),"void\xa0StartDefaultTask(void\xa0*argument)\n{\n\xa0\xa0/*\xa0USER\xa0CODE\xa0BEGIN\xa05\xa0*/\n  MX_TouchGFX_Process();\n\xa0\xa0/*\xa0USER\xa0CODE\xa0END\xa05\xa0*/\xa0\n}\n")),(0,r.kt)("p",null,"When FreeRTOS is enabled, STM32CubeMX will also generate a call to ",(0,r.kt)("inlineCode",{parentName:"p"},"osKernelStart();")," which starts the scheduler."),(0,r.kt)("h4",k({},{id:"other-cmsis-compliant-os"}),"\u305d\u306e\u4ed6\u306eCMSIS\u6e96\u62e0OS"),(0,r.kt)("p",null,"When developers require a different CMSIS compliant OS than what STM32CubeMX can offer (FreeRTOS and ThreadX) he must perform RTOS configuration and task definition manually. \u4e00\u822c\u7684\u306b\u306f\u3001\u4ee5\u4e0b\u306e\u624b\u52d5\u30b9\u30c6\u30c3\u30d7\u3092\u884c\u3046\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"RTOS\u3092\u8a2d\u5b9a\u3059\u308b\u3002"),(0,r.kt)("li",{parentName:"ol"},"TouchGFX\u3092\u5b9f\u884c\u3059\u308b\u305f\u3081\u306e\u30bf\u30b9\u30af\u3092\u5b9a\u7fa9\u3059\u308b\uff08",(0,r.kt)("inlineCode",{parentName:"li"},"MX_TouchGFX_Process"),"\uff09\u3002"),(0,r.kt)("li",{parentName:"ol"},"\u30b9\u30b1\u30b8\u30e5\u30fc\u30e9\u3092\u8d77\u52d5\u3059\u308b\u3002")),(0,r.kt)("p",null,"Here's an example of how to perform steps 2 and 3 for ThreadX, manually. Since STM32CubeMX cannot help with any configuration for operating systems it does not support everything must be done in the provided ",(0,r.kt)("em",{parentName:"p"},"user code sections")," to avoid code being overwritten. \u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u306f\u3001GUI\u30bf\u30b9\u30af\u5b9a\u7fa9\u306e\u7591\u4f3c\u30b3\u30fc\u30c9\u3092\u793a\u3057\u3066\u3044\u307e\u3059\u3002 Generally, any code that is not generated by STM32CubeMX should be placed in ",(0,r.kt)("em",{parentName:"p"},"user code sections")," that are scattered throughout the file ",(0,r.kt)("inlineCode",{parentName:"p"},"main.c"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",k({parentName:"pre"},{className:"language-cpp"}),'/* BEGIN USER CODE SECTION */\n#include "tx_api.h"\n\n#define GUI_THREAD_STACK_SIZE         1024\nTX_THREAD gui_thread;\nvoid    gui_thread_entry(ULONG thread_input); //Thread prototype\n/* END USER CODE SECTION */\n\nint main()\n{\n  /* BEGIN USER CODE SECTION - Choose an appropriate one from main.c */\n  /* Allocate the stack for gui thread  */\n  tx_byte_allocate(...);\n\n  /* Create the gui thread.  */\n  tx_thread_create(&gui_thread, "GUI Thread", gui_thread_entry, 0,\n              pointer, GUI_TASK_STACK_SIZE,\n              1, 1, TX_NO_TIME_SLICE, TX_AUTO_START);\n\n  /* END USER CODE SECTION*/\n')),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"MX_TouchGFX_Process")," \u3092\u547c\u3073\u51fa\u3057\u3066\u3001\u30bf\u30b9\u30af\uff65\u30cf\u30f3\u30c9\u30e9\u5185\u3067 TouchGFX\u30a8\u30f3\u30b8\u30f3\u306e\u30e1\u30a4\u30f3\uff65\u30eb\u30fc\u30d7\u3092\u958b\u59cb\u3057\u307e\u3059\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",k({parentName:"pre"},{className:"language-cpp"}),"/* BEGIN USER CODE SECTION */\nvoid gui_thread_entry(ULONG thread_input)\n{\n  MX_TouchGFX_Process();\n}\n/* END USER CODE SECTION*/\n")),(0,r.kt)("p",null,"\u30b9\u30b1\u30b8\u30e5\u30fc\u30e9\u3092\u8d77\u52d5\u3057\u3066\u3001GUI\u30bf\u30b9\u30af\u3068TouchGFX\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",k({parentName:"pre"},{className:"language-cpp"}),"/* BEGIN USER CODE SECTION */\ntx_kernel_enter();\n/* END USER CODE SECTION*/\n")),(0,r.kt)("h3",k({},{id:"additional-features"}),"Additional features"),(0,r.kt)("h4",k({},{id:"external-data-reader"}),"External Data Reader"),(0,r.kt)("p",null,"RGB565\u30d5\u30ec\u30fc\u30e0\u30d0\u30c3\u30d5\u30a1\uff65\u30d4\u30af\u30bb\u30eb\uff65\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3067\u306f\u3001touchgfx\u306f\u3001\u3044\u308f\u3086\u308b",(0,r.kt)("em",{parentName:"p"},"\u30c7\u30fc\u30bf\uff65\u30ea\u30fc\u30c0"),"\u306e\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u958b\u767a\u8005\u306f\u3001\u30e1\u30e2\u30ea\u5185\u3067\u8ffd\u52a0\u30d0\u30c3\u30d5\u30a1\u304c\u5fc5\u8981\u3068\u306a\u308b",(0,r.kt)("a",k({parentName:"p"},{href:"../ui-development/touchgfx-engine-features/caching-bitmaps"}),"\u30ad\u30e3\u30c3\u30b7\u30e5"),"\u3092\u884c\u3046\u306e\u3067\u306f\u306a\u304f\u3001\u30e1\u30e2\u30ea\u30de\u30c3\u30d7\u3055\u308c\u306a\u3044\u30b7\u30ea\u30a2\u30ebFlash\u304b\u3089\u76f4\u63a5\u30c7\u30fc\u30bf\u3092\u8aad\u307f\u51fa\u305b\u307e\u3059\u3002 \u30c7\u30fc\u30bf\uff65\u30ea\u30fc\u30c0\u3092\u5b9f\u88c5\u3057\u3066\u3001\u30e1\u30e2\u30ea\u30de\u30c3\u30d7\u3055\u308c\u306a\u3044Flash\u30c1\u30c3\u30d7\u304b\u3089\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\uff65\u30a2\u30bb\u30c3\u30c8\u3092\u53d6\u5f97\u3059\u308b\u65b9\u6cd5\u306e\u4f8b\u306b\u3064\u3044\u3066\u306f\u3001",(0,r.kt)("a",k({parentName:"p"},{href:"../scenarios/using-serial-flash"}),"\u30b7\u30ea\u30a2\u30ebFlash"),"\u306e\u8a18\u4e8b\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),(0,r.kt)("p",null,"\u901a\u5e38\u3001",(0,r.kt)("em",{parentName:"p"},"\u30c7\u30fc\u30bf\uff65\u30ea\u30fc\u30c0"),"\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u306f\u3001\u8ffd\u52a0\u30d0\u30c3\u30d5\u30a1\u7528\u306b\u5341\u5206\u306a\u30e1\u30e2\u30ea\u3092\u5099\u3048\u3066\u3044\u306a\u3044\u4f4e\u30b3\u30b9\u30c8\u306e\u30bd\u30ea\u30e5\u30fc\u30b7\u30e7\u30f3(STM32G0\u306a\u3069)\u3067\u4f7f\u7528\u3055\u308c\u307e\u3059\u3002 DMA2D\u304c\u6709\u52b9\u3067\u3042\u308b\u5834\u5408\u3001\u3053\u308c\u306f\u6709\u52b9\u5316\u3067\u304d\u307e\u305b\u3093\u3002"),(0,r.kt)("p",null,"\u30d5\u30ec\u30fc\u30e0\u30d0\u30c3\u30d5\u30a1\u306e\u30d4\u30af\u30bb\u30eb\uff65\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3068\u3057\u3066",(0,r.kt)("em",{parentName:"p"},"RGB565"),"\u3092\u9078\u629e\u3059\u308b\u3068\u3001",(0,r.kt)("em",{parentName:"p"},"\uff3bAdditional Features\uff3d"),"\u30b0\u30eb\u30fc\u30d7\u304c\u4f7f\u7528\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002"),(0,r.kt)(a.Z,{imageSource:"/img/development/touchgfx-hal-development/touchgfx-generator/additional-features-data-reader.png",width:"520",noShadow:!0,mdxType:"Figure"},"\uff3bAdditional Features\uff3d\u306e\u30c7\u30fc\u30bf\uff65\u30ea\u30fc\u30c0"),(0,r.kt)("p",null,"\u958b\u767a\u8005\u306f\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u3092\u884c\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"External Data Reader"),": \u3053\u306e\u6a5f\u80fd\u3092\u6709\u52b9\u5316\u307e\u305f\u306f\u7121\u52b9\u5316\u3057\u307e\u3059\u3002 \u6709\u52b9\u5316\u3059\u308b\u3068\u3001TouchGFX\u306f\u751f\u6210\u6e08\u307f\u306e\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u3092\u4ecb\u3057\u3066\u30a2\u30bb\u30c3\u30c8\u306e\u30c7\u30fc\u30bf\u3092\u76f4\u63a5\u53d6\u5f97\u3057\u307e\u3059\u3002 \u7121\u52b9\u5316\u3057\u305f\u5834\u5408\u306f\u3001\u958b\u767a\u8005\u304c\u30e1\u30e2\u30ea\u5185\u306e\u30d0\u30c3\u30d5\u30a1\u306b\u753b\u50cf\u3092",(0,r.kt)("em",{parentName:"li"},"\u30ad\u30e3\u30c3\u30b7\u30e5"),"\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"External Data Reader: Line Buffer Size"),": \u753b\u50cf\u307e\u305f\u306f\u30c6\u30ad\u30b9\u30c8\u3092\u30d5\u30ec\u30fc\u30e0\u30d0\u30c3\u30d5\u30a1\u306b\u30d6\u30ec\u30f3\u30c9\u3059\u308b\u305f\u3081\u306e2\u3064\u306e\u30d0\u30c3\u30d5\u30a1\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002 ARGB8888\u30d4\u30af\u30bb\u30eb\uff65\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3067\u30d5\u30eb\uff65\u30b5\u30a4\u30ba\u306e\u753b\u50cf\u3092\u30b5\u30dd\u30fc\u30c8\u3059\u308b\u305f\u3081\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f\u3001\u4e00\u753b\u9762\u306e\u5e45 x 4\u30d0\u30a4\u30c8\u3067\u3059\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"External Data Reader: Minimum DMA transfer size"),": DMA\u8ee2\u9001\u3092\u958b\u59cb\u3059\u308b\u305f\u3081\u306e\u6700\u5c0f\u9650\u5fc5\u8981\u306a\u30d0\u30a4\u30c8\u6570\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002 \u3053\u308c\u3088\u308a\u5c11\u306a\u3044\u30d0\u30a4\u30c8\u6570\u304c\u8981\u6c42\u3055\u308c\u305f\u5834\u5408\u3001DMA\u306f\u4f7f\u7528\u3055\u308c\u307e\u305b\u3093\u3002")),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"\uff3bExternal Data Reader\uff3d")," \u3092\u6709\u52b9\u306b\u3057\u3066\u30b3\u30fc\u30c9\u3092\u751f\u6210\u3059\u308b\u3068\u3001\u30e1\u30e2\u30ea\u30de\u30c3\u30d7\u3055\u308c\u306a\u3044Flash\u304b\u3089\u30a2\u30bb\u30c3\u30c8\u3092\u76f4\u63a5\u53d6\u5f97\u3067\u304d\u308b\u3088\u3046\u306b\u4ee5\u4e0b\u306e\u8ffd\u52a0\u30d5\u30a1\u30a4\u30eb\u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"TouchGFX/target/generated/TouchGFXGeneratedDataReader.cpp")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"TouchGFX/target/generated/TouchGFXGeneratedDataReader.hpp")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"TouchGFX/target/TouchGFXDataReader.cpp")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"TouchGFX/target/TouchGFXDataReader.hpp"))),(0,r.kt)("p",null,"\u901a\u5e38\u901a\u308a\u3001TouchGFX Generator\u306b\u3088\u3063\u3066\u751f\u6210\u3055\u308c\u305f\u30b3\u30fc\u30c9\u306b\u5bfe\u3057\u3066\u3001",(0,r.kt)("inlineCode",{parentName:"p"},"TouchGFXGeneratedDataReader")," \u306f\u8aad\u51fa\u3057\u5c02\u7528\u3067\u3042\u308a\u3001\u30e6\u30fc\u30b6\u306e\u5909\u66f4\u306f ",(0,r.kt)("inlineCode",{parentName:"p"},"TouchGFXDataReader"),"\u30af\u30e9\u30b9\u5185\u3067\u884c\u3046\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002 ",(0,r.kt)("inlineCode",{parentName:"p"},"TouchGFXGeneratedDataReader"),"\u306e\u30bf\u30a4\u30d7\u306f",(0,r.kt)("inlineCode",{parentName:"p"},"touchgfx::FlashDataReader"),".\u3067\u3059\u3002"),(0,r.kt)("p",null,"\u4ee5\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u304c\u5909\u66f4\u3055\u308c\u3001",(0,r.kt)("inlineCode",{parentName:"p"},"DataReader"),"\u3092\u4f7f\u7528\u3059\u308b\u3088\u3046\u306bTouchGFX HAL\u304c\u8a2d\u5b9a\u3055\u308c\u307e\u3059\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"TouchGFX/target/generated/TouchGFXConfiguration.cpp")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"TouchGFX/target/generated/TouchGFXGeneratedHAL.cpp")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"TouchGFX/target/generated/TouchGFXGeneratedHAL.hpp"))),(0,r.kt)(o.Z,{mdxType:"Note"},"\u30c7\u30fc\u30bf\uff65\u30ea\u30fc\u30c0\u306e\uff3bAdditional Feature\uff3d\u306f\u3001DMA2D\u3068LTDC\u304c\u7121\u52b9\u306b\u306a\u3063\u3066\u3044\u308b\u5834\u5408\u306b\u306e\u307f\u4f7f\u7528\u3067\u304d\u307e\u3059\u3002"),(0,r.kt)("h4",k({},{id:"8bit-ltdc-color-look-up-table"}),"8bitLTDC\u30ab\u30e9\u30fc\uff65\u30eb\u30c3\u30af\u30a2\u30c3\u30d7\uff65\u30c6\u30fc\u30d6\u30eb"),(0,r.kt)("p",null,"\u30d5\u30ec\u30fc\u30e0\u30d0\u30c3\u30d5\u30a1\u3092L8\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3067\u8aad\u307f\u51fa\u3059\u3088\u3046\u306bLTDC\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u304a\u308a\u3001TouchGFX\u304c ",(0,r.kt)("a",k({parentName:"p"},{href:"../../api/classes/classtouchgfx_1_1_l_c_d8bpp___a_b_g_r2222"}),"ABRG2222"),"\u3001",(0,r.kt)("a",k({parentName:"p"},{href:"../../api/classes/classtouchgfx_1_1_l_c_d8bpp___a_r_g_b2222"}),"ARGB222"),"\u3001",(0,r.kt)("a",k({parentName:"p"},{href:"../../api/classes/classtouchgfx_1_1_l_c_d8bpp___b_g_r_a2222"}),"BGRA2222"),"\u3001",(0,r.kt)("a",k({parentName:"p"},{href:"../../api/classes/classtouchgfx_1_1_l_c_d8bpp___r_g_b_a2222"}),"RGBA2222"),"\u306e\u3044\u305a\u308c\u304b\u3067\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u3059\u308b\u5834\u5408\u3001TouchGFX Generator\u306f\u3001",(0,r.kt)("inlineCode",{parentName:"p"},"TouchGFXHAL::initialize()"),"\u306e\u5b9f\u884c\u6642\u306bLTDC\u306b\u30ed\u30fc\u30c9\u3055\u308c\u308bCLUT\u3092\u63d0\u4f9b\u3057\u307e\u3059\u3002 LTDC\u304a\u3088\u3073CLUT\u306e\u4f7f\u7528\u65b9\u6cd5\u306e\u8a73\u7d30\u306b\u3064\u3044\u3066\u306f\u3001STM32\u30de\u30a4\u30af\u30ed\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u306e\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\uff65\u30de\u30cb\u30e5\u30a2\u30eb\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),(0,r.kt)("h2",k({},{id:"video-decoding"}),"Video Decoding"),(0,r.kt)("p",null,"The Video Decoding section allows developers to enhance the TouchGFX HAL with either hardware or software video decoding capabilities."),(0,r.kt)("p",null,"Video Decoding is only available with RGB565 (16bpp) and RGB888 (24bpp) fremabuffer pixel formats. If neither of these are selected he Vedeo Decoding section will now be available."),(0,r.kt)(o.Z,{mdxType:"Note"},"Not all MCUs support hardware video decoding."),(0,r.kt)("h3",k({},{id:"video-decoding-type"}),"Type"),(0,r.kt)("p",null,'By default the Type of video Decoding is disabled. If the required peripherals are not enabled in CubeMX both "Software" and "Hardware" will be greyed out. Hover the mouse over the greyed out options the see which peripherals are required.'),(0,r.kt)(a.Z,{noShadow:!0,imageSource:"/img/development/touchgfx-hal-development/touchgfx-generator/video-dependecies-info-box.png",width:"800",mdxType:"Figure"},'Info box showing Video Type dependencies for "Hardware"'),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Software"),' - If LIBJPEG is enabled under the Middleware section in STM32CubeMX the "Software" option can be selected and the software decoder will be generated. This means that TouchGFX Generator will generate a software MJPEG decoder.'),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Hardware"),' - If JPEG is enabled under the Multimedia section and a CMSIS compliant RTOS is selected in the TouchGFX Generator the "Hardware" option can be selected.')),(0,r.kt)(a.Z,{noShadow:!0,imageSource:"/img/development/touchgfx-hal-development/touchgfx-generator/video-decoding-options-4-18.png",width:"800",mdxType:"Figure"},"Video decoding type options"),(0,r.kt)("p",null,'In the LIBJPEG settings the RGB ordering in the "RGB scanline format" section has to be set to "BGR" instead of "RGB" for efficiency. The number of bytes per pixel must be set to 3.'),(0,r.kt)(a.Z,{noShadow:!0,imageSource:"/img/development/touchgfx-hal-development/touchgfx-generator/libjpeg-rgb-ordering.png",width:"700",mdxType:"Figure"},"Required LIBJPEG RGB scanline format settings"),(0,r.kt)("p",null,"When working with hardware decoding the RGB format in the JPEG settings has to be the same as the display."),(0,r.kt)(i.Z,{mdxType:"FurtherReading"},"See section ",(0,r.kt)(d.Z,{to:"scenarios/scenarios-video-decoding",mdxType:"Link"},"Scenarios")," for concrete examples of code for different video decoding scenarios."),(0,r.kt)("h3",k({},{id:"video-decoding-number"}),"Number of Videos"),(0,r.kt)("p",null,'The "Number of Videos" option is the largest amount of simultainous videos being decoded on the same screen in the GUI at any given time. If you only wish to decode one video on a screen the "Number of Videos" can be set to 1.'),(0,r.kt)("p",null,"A maximum of 4 videos can be decoded simultaneously."),(0,r.kt)("h3",k({},{id:"video-decoding-strategy"}),"Strategy"),(0,r.kt)("p",null,"The developer has three options when it comes to the video decoding strategy."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Direct to Framebuffer"),' - The video is decoded in the UI thread. It is slower than the other strategies. When working with hardware video decoding the "Direct to Framebuffer" option is unavailable.'),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Single Buffer")," - Video is decoded in a seperate task in a dedicated buffer. This buffer is allocated in internal memory."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Double Buffer")," - Video is decoded in a seperate task in two dedicated buffers for better performances at the cost of memory.")),(0,r.kt)("p",null,"When working with the single or double framebuffer strategy it is necessary to enable a CMSIS compliant OS."),(0,r.kt)(a.Z,{noShadow:!0,imageSource:"/img/development/touchgfx-hal-development/touchgfx-generator/video-rtos-requirement-info-box.png",width:"700",mdxType:"Figure"},"Info box about CMSIS RTOS requirement"),(0,r.kt)(o.Z,{mdxType:"Note"},"Pay attention to the memory consumption when working with the double buffer strategy."),(0,r.kt)(i.Z,{mdxType:"FurtherReading"},"See section ",(0,r.kt)(d.Z,{to:"scenarios/scenarios-video-decoding",mdxType:"Link"},"Scenarios")," for a concrete example of configuring FreeRTOS for video decoding."),(0,r.kt)("h3",k({},{id:"video-decoding-buffer-size"}),"Buffer size"),(0,r.kt)("p",null,"The buffer width and height settings must correspond to the largest video dimension in the application. The width must be divisible by 32."),(0,r.kt)("p",null,'The following code is the generated code in TouchGFXGeneratedHAL.cpp for an application using an RGB888 display with a 480*272 video and the "Single Buffer" video decoding strategy.'),(0,r.kt)(l.Z,{mdxType:"CodeHeader"},"TouchGFXGeneratedHAL.cpp"),(0,r.kt)("pre",null,(0,r.kt)("code",k({parentName:"pre"},{className:"language-cpp"}),"\n#include <DedicatedBufferVideoController.hpp>\n#include <SoftwareMJPEGDecoder.hpp>\n\nuint32_t lineBuffer[480];\n\nSoftwareMJPEGDecoder mjpegdecoder1((uint8_t*)lineBuffer);\n\nuint32_t videoRGBBuffer[97920];\nDedicatedBufferController<1, 480, 272, 480*3U, Bitmap::RGB888> videoController;\n\n//Singleton Factory\nVideoController& VideoController::getInstance()\n{\n    return videoController;\n}\n\nvoid TouchGFXGeneratedHAL::initialize()\n{\n    HAL::initialize();\n    registerEventListener(*(Application::getInstance()));\n    setFrameBufferStartAddresses((void*)frameBuf, (void*)(frameBuf + sizeof(frameBuf) / (sizeof(uint32_t) * 2)), (void*)0);\n\n    /*\n     * Add software decoder to video controller\n     */\n    videoController.addDecoder(mjpegdecoder1, 0);\n\n    videoController.setRGBBuffer((uint8_t*)videoRGBBuffer, sizeof(videoRGBBuffer));\n}\n")),(0,r.kt)("h2",k({},{id:"generated-project"}),"\u751f\u6210\u3055\u308c\u308b\u30d7\u30ed\u30b8\u30a7\u30af\u30c8"),(0,r.kt)("p",null,"TouchGFX works with (at least) the following IDEs when generating code using the ",(0,r.kt)("strong",{parentName:"p"},"Generate Code")," button in STM32CubeMX:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"EWARM"),(0,r.kt)("li",{parentName:"ol"},"MDK-ARM"),(0,r.kt)("li",{parentName:"ol"},"STM32CubeIDE")),(0,r.kt)("p",null,"\u6700\u9069\u306a\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u69cb\u9020\u3092\u5f97\u308b\u305f\u3081\u306b\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u751f\u6210\u3067\u306f\u4ee5\u4e0b\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u9078\u629e\u3057\u307e\u3059\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\uff3bApplication structure\uff3d:",(0,r.kt)("strong",{parentName:"li"},"\uff3bAdvanced\uff3d")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\uff3bGenerate under root\uff3d"),"\u7121\u52b9\u5316(STM32CubeIDE\u306e\u307f)")),(0,r.kt)("p",null,"\u6700\u9069\u306a\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u69cb\u9020\u3092\u5f97\u308b\u305f\u3081\u306b\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u751f\u6210\u3067\u306f\u4ee5\u4e0b\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u9078\u629e\u3057\u307e\u3059\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\uff3bApplication structure\uff3d:",(0,r.kt)("strong",{parentName:"li"},"\uff3bAdvanced\uff3d")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\uff3bGenerate under root\uff3d"),"\u7121\u52b9\u5316(STM32CubeIDE\u306e\u307f)")),(0,r.kt)(a.Z,{imageSource:"/img/development/touchgfx-hal-development/touchgfx-generator/project-manager.png",noShadow:!1,mdxType:"Figure"},"\uff3bAdvanced\uff3d\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u69cb\u9020\u3092\u9078\u629e\u3057\u3001\uff3bGenerate under root\uff3d\u3092\u30aa\u30d5\u306b\u3059\u308b"),(0,r.kt)("p",null,"STM32CubeMX will also generate a ",(0,r.kt)("em",{parentName:"p"},"TouchGFX")," folder with the following structure:"),(0,r.kt)(a.Z,{imageSource:"/img/development/touchgfx-hal-development/touchgfx-generator/folder-b.png",noShadow:!1,mdxType:"Figure"},"TouchGFX\u30d5\u30a9\u30eb\u30c0\u306e\u69cb\u9020"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"App")," \u30d5\u30a9\u30eb\u30c0\u306b\u306f\u3001TouchGFX\u3092\u521d\u671f\u5316\u3057\u3001\u8d77\u52d5\u3059\u308b\u30b3\u30fc\u30c9\u304c\u542b\u307e\u308c\u3066\u3044\u307e\u3059\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"target"),"\u30d5\u30a9\u30eb\u30c0\u306b\u306f\u3001\u8aad\u51fa\u3057\u5c02\u7528\u306e\u751f\u6210\u6e08\u307f\u30b3\u30fc\u30c9\uff08generated/\u5185\uff09\u3068\u3001\u5909\u66f4\u53ef\u80fd\u306a\u30e6\u30fc\u30b6\uff65\u30af\u30e9\u30b9(",(0,r.kt)("inlineCode",{parentName:"li"},"STM32TouchController.cpp"),"\u3001",(0,r.kt)("inlineCode",{parentName:"li"},"TouchGFXGPIO.cpp")," \u304a\u3088\u3073",(0,r.kt)("inlineCode",{parentName:"li"},"TouchGFXHAL.cpp"),"\u304c\u542b\u307e\u308c\u3066\u3044\u307e\u3059\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},".part"),"\u30d5\u30a1\u30a4\u30eb\u306f\u3001TouchGFX\u30d8\u30c3\u30c0\uff65\u30d5\u30a1\u30a4\u30eb\u3068\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u5b8c\u5099\u3057\u305f\u5b8c\u5168\u306aTouchGFX\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3059\u308b\u305f\u3081\u306b\u3001TouchGFX Designer\u3092\u4f7f\u7528\u3057\u3066\u958b\u304b\u308c\u307e\u3059\u3002part\u30d5\u30a1\u30a4\u30eb\u306b\u306f\u30d4\u30af\u30bb\u30eb\uff65\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3084Designer\u304cTouchGFX\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\uff65\u30b3\u30fc\u30c9\u3092\u751f\u6210\u3059\u308b\u3068\u304d\u306b\u4f7f\u7528\u3059\u308b\u30ad\u30e3\u30f3\u30d0\u30b9\u306e\u5bf8\u6cd5\u306a\u3069\u306e\u95a2\u9023\u3059\u308b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u60c5\u5831\u304c\u542b\u307e\u308c\u3066\u3044\u307e\u3059\u3002")),(0,r.kt)("h2",k({},{id:"touchgfx-designer\u30d7\u30ed\u30b8\u30a7\u30af\u30c8"}),"TouchGFX Designer\u30d7\u30ed\u30b8\u30a7\u30af\u30c8"),(0,r.kt)("p",null,"\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u306f\u3001 \u300c",(0,r.kt)("a",k({parentName:"p"},{href:"#generated-code-architecture"}),"\u751f\u6210\u3055\u308c\u308b\u30b3\u30fc\u30c9\u306e\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3"),"\u300d\u30bb\u30af\u30b7\u30e7\u30f3\u3067\u8aac\u660e\u3057\u305f",(0,r.kt)("inlineCode",{parentName:"p"},".part"),"\u30d5\u30a1\u30a4\u30eb\u306e\u5185\u5bb9\u4f8b\u3092\u793a\u3057\u3066\u3044\u307e\u3059\u3002 The post-generate command, seen below, will update the project selected in STM32CubeMX (e.g. EWARM) when new files are created by the TouchGFX designer (e.g. new screens and assets)."),(0,r.kt)("pre",null,(0,r.kt)("code",k({parentName:"pre"},{className:"language-json"}),'{\n "Application": {\n "Name": "my_project",\n "TouchGfxPath": "../Middlewares/ST/touchgfx",\n "AvailableColorDepths": [ 16 ],\n "AvailableLCDs":\n  {\n    "16": "LCD16bpp"\n },\n "AvailableResolutions" :\n [\n  {\n    "Width": 320,\n    "Height": 240\n  }\n ],\n "PostGenerateTargetCommand" : "touchgfx update_project --project-file=../my_project.ioc --platform=m7"\n },\n "Version": "4.13.0"\n}\n')),(0,r.kt)("p",null,"TouchGFX Designer\u3067",(0,r.kt)("em",{parentName:"p"},".part")," \u30d5\u30a1\u30a4\u30eb\u3092\u958b\u304f\u3068\u3001\u958b\u767a\u8005\u306b\u306f\u3001\u5177\u4f53\u7684\u306aUI\u3092\u30ed\u30fc\u30c9\u3059\u308b\u306e\u304b\u3001\u7a7a\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u304b\u3089\u958b\u59cb\u3059\u308b\u306e\u304b\u3092\u9078\u629e\u3059\u308b\u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002"),(0,r.kt)(a.Z,{imageSource:"/img/development/touchgfx-hal-development/touchgfx-generator/choose-ui-4-17.png",noShadow:!1,mdxType:"Figure"},"UI\u306e\u9078\u629e"),(0,r.kt)("p",null,"TouchGFX Designer\u3067",(0,r.kt)("em",{parentName:"p"},"\uff3bGenerate Code\uff3d"),"\u3092\u62bc\u3059\u3068\u3001TouchGFX\u30d5\u30a9\u30eb\u30c0\u306e\u69cb\u9020\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002 \u4e0b\u306e\u753b\u50cf\u306fTouchGFX\u30d5\u30a9\u30eb\u30c0\u69cb\u9020\u306e\u5177\u4f53\u4f8b\u3092\u793a\u3057\u3066\u304a\u308a\u3001\u751f\u6210\u5f8c\u306e\u65b0\u3057\u3044\u30d5\u30a1\u30a4\u30eb\u3084\u30d5\u30a9\u30eb\u30c0\u3092\u30cf\u30a4\u30e9\u30a4\u30c8\u8868\u793a\u3057\u3066\u3044\u307e\u3059\u3002"),(0,r.kt)(a.Z,{imageSource:"/img/development/touchgfx-hal-development/touchgfx-generator/designer-gen-code-4-17.png",noShadow:!1,mdxType:"Figure"},"\uff3bGenerate Code\uff3d"),(0,r.kt)(a.Z,{imageSource:"/img/development/touchgfx-hal-development/touchgfx-generator/post-designer-generation.png",noShadow:!1,mdxType:"Figure"},"TouchGFX\u30d5\u30a9\u30eb\u30c0\u306e\u69cb\u9020"),(0,r.kt)("p",null,"TouchGFX will detect the selected IDE from the .ioc STM32CubeMX file (For STM32CubeIDE, EWARM, MDK-ARM) and update the project file with new, generated files like files for screen definitions, image- and font assets."),(0,r.kt)("p",null,"At this point, developers can work interchangeably in STM32CubeMX, TouchGFX Designer and toolchain/IDE where:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"STM32CubeMX updates the IDE project with drivers"),(0,r.kt)("li",{parentName:"ul"},"STM32CubeMX updates the TouchGFX ",(0,r.kt)("em",{parentName:"li"},".part")," file with UI related changes that are instantly picked up by the designer"),(0,r.kt)("li",{parentName:"ul"},"STM32CubeMX generates HAL code (TouchGFX/target/generated/) based on TouchGFX Generator Configuration necessary for TouchGFX to work on a specific platform."),(0,r.kt)("li",{parentName:"ul"},"TouchGFX Designer\u306f\u751f\u6210\u3055\u308c\u305f\u30b3\u30fc\u30c9\u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u66f4\u65b0\u3059\u308b\u3002")),(0,r.kt)(o.Z,{mdxType:"Note"},'For Dual-Core projects, having enabled TouchGFX for a specific context, the TouchGFX project will usually be located in a dedicated folder for that context, e.g. "CM4/TouchGFX" or "CM7/TouchGFX".'),(0,r.kt)("h2",k({},{id:"\u751f\u6210\u3055\u308c\u305f\u52d5\u4f5c\u306e\u5909\u66f4"}),"\u751f\u6210\u3055\u308c\u305f\u52d5\u4f5c\u306e\u5909\u66f4"),(0,r.kt)("p",null,"It important to know that, due to the class hierarchy of the HAL, users can override HAL configuration or behavior that was generated by STM32CubeMX. \u4ee5\u4e0b\u306e\u4f8b\u3067\u306f\u3001\u958b\u767a\u8005\u304c ",(0,r.kt)("inlineCode",{parentName:"p"},"initialize")," \u95a2\u6570\u3092\u5909\u66f4\u3059\u308b\u3053\u3068\u3067\u3001TouchGFX\u306e\u8ffd\u52a0\u8a2d\u5b9a\u3084\u3001",(0,r.kt)("inlineCode",{parentName:"p"},"TouchGFXGeneratedHAL")," \u306e\u65e2\u5b58\u306e\u8a2d\u5b9a\u306e\u5909\u66f4\u304c\u53ef\u80fd\u3067\u3059\u3002"),(0,r.kt)(l.Z,{mdxType:"CodeHeader"},"TouchGFXHAL.cpp"),(0,r.kt)("pre",null,(0,r.kt)("code",k({parentName:"pre"},{className:"language-cpp"}),"void TouchGFXHAL::initialize()\n{\n    // Calling parent implementation of initialize().\n    //\n    // To overwrite the generated implementation, omit call to parent function\n    // and implemented needed functionality here.\n    // Please note, HAL::initialize() must be called to initialize the framework.\n\n    TouchGFXGeneratedHAL::initialize();\n\n    //Overriding configurations\n    hal.lockDMAToFrontPorch(true);\n    hal.setFingerSize(4);\n    hal....\n}\n")),(0,r.kt)("h2",k({},{id:"upgrading-projects"}),"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9"),(0,r.kt)("p",null,"TouchGFX Generator parameters are stored in .ioc files (STM32CubeMX project). TouchGFX Generator\u306e\u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u308b\u3068\u3001\u65e7\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u304c\u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u3068\u4e92\u63db\u6027\u3092\u6301\u305f\u306a\u3044\u305f\u3081\u306b\u79fb\u884c\u304c\u5fc5\u8981\u306b\u306a\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002"),(0,r.kt)("p",null,"CubeMX\u306fX-CUBE\u30d0\u30fc\u30b8\u30e7\u30f3\u9593\u306e\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u306a\u3044\u305f\u3081\u3001",(0,r.kt)("em",{parentName:"p"},"\uff3bGenerate Code\uff3d"),"\u304c\u62bc\u3055\u308c\u308b\u3068\u3001",(0,r.kt)("inlineCode",{parentName:"p"},".touchgfx"),"\u30d5\u30a1\u30a4\u30eb\u306e ",(0,r.kt)("inlineCode",{parentName:"p"},"PostGenerateTargetCommand"),"\u30bb\u30af\u30b7\u30e7\u30f3\u5185\u306e\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u306b\u3088\u3063\u3066TouchGFX Designer\u3067\u81ea\u52d5\u7684\u306b\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u304c\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002"),(0,r.kt)(l.Z,{mdxType:"CodeHeader"},".touchgfx"),(0,r.kt)("pre",null,(0,r.kt)("code",k({parentName:"pre"},{}),'"PostGenerateTargetCommand" : "touchgfx update_project --project-file=../upgrade.ioc --platform=m7"\n')),(0,r.kt)("p",null,"\u30b3\u30de\u30f3\u30c9\u306b\u3088\u3063\u3066",(0,r.kt)("inlineCode",{parentName:"p"},".ioc")," \u30d5\u30a1\u30a4\u30eb\u304c\u8aad\u307f\u51fa\u3055\u308c\u3001\u73fe\u5728\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306eX-CUBE-TOUCHGFX\u306b\u5408\u3046\u3088\u3046\u306b\u30d1\u30e9\u30e1\u30fc\u30bf\u304c\u66f4\u65b0\u3055\u308c\u307e\u3059\u3002 \u6b21\u306e\u4f8b\u306f\u3001X-CUBE-TOUCHGFX 4.13.0\u3067\u4f5c\u6210\u3055\u308c\u305f.ioc\u30d5\u30a1\u30a4\u30eb\u3067\u3001\u30b9\u30af\u30ea\u30d7\u30c8\uff08X-CUBE-TOUCHGFX 4.14.0\uff09\u3092\u624b\u52d5\u3067\u5b9f\u884c\u3059\u308b\u65b9\u6cd5\u3092\u793a\u3057\u3066\u3044\u307e\u3059\u3002"),(0,r.kt)(l.Z,{mdxType:"CodeHeader"},"STM32F746 DISCO\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\uff65\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u4f7f\u7528\u3057\u305f4.13.0\u304b\u30894.14.0\u3078\u306e\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u4f8b"),(0,r.kt)("pre",null,(0,r.kt)("code",k({parentName:"pre"},{}),"$ touchgfx update_project --project-file=../STM32F746G_DISCO.ioc\n  TouchGFX Generator 4.13.0 found\n  Creating backup of ../STM32F746G_DISCO.ioc as ../backup_STM32F746G_DISCO.ioc\n  Performing upgrade 4.13.0 -> 4.14.0 ... OK\n")),(0,r.kt)("p",null,"Opening the updated project with STM32CubeMX prompts the user to install the version of X-CUBE-TOUCHGFX that is represented by the .ioc file (if not already installed). ",(0,r.kt)("em",{parentName:"p"},"\uff3bDownload now\uff3d"),"\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u3001X-Cube-TouchGFX-4.14.0\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3068\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u884c\u308f\u308c\u307e\u3059\u3002"),(0,r.kt)(a.Z,{imageSource:"/img/development/touchgfx-hal-development/touchgfx-generator/cubemx-additional-software-manager-settings-missing-x-cube-touchgfx-4.14.0.png",noShadow:!1,mdxType:"Figure"},"\u8ffd\u52a0\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\uff65\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u304c\u898b\u3064\u304b\u3089\u306a\u3044\u5834\u5408:"),(0,r.kt)("p",null,"\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\uff65\u30d7\u30ed\u30bb\u30b9\u306e\u5b9f\u884c\u6642\u3001TouchGFX Generator\u306e\u8a2d\u5b9a\u306f\u3059\u3079\u3066\u4fdd\u6301\u3055\u308c\u3001.ioc\u30d5\u30a1\u30a4\u30eb\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u306f\u5148\u982d\u306b",(0,r.kt)("inlineCode",{parentName:"p"},"backup_"),"\u304c\u4ed8\u3044\u305f\u72b6\u614b\u3067\u3001\u5143\u306e\u30d5\u30a1\u30a4\u30eb\u3068\u540c\u3058\u5834\u6240\u306b\u914d\u7f6e\u3055\u308c\u307e\u3059"),(0,r.kt)(o.Z,{mdxType:"Note"},"To use the new features provided by TouchGFX Generator, ",(0,r.kt)("i",null,"Generate Code")," must be performed in STM32CubeMX."),(0,r.kt)(c.Z,{mdxType:"Caution"},"If upgrading X-CUBE-TOUCHGFX through STM32CubeMX for an existing TouchGFX Project and the upgrade process is not run by TouchGFX Designer, TouchGFX Generator parameters will be reset to default since they are applicable to a different version."))}N.isMDXComponent=!0}}]);